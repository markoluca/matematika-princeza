<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ‘‘ Princeza Matematika ğŸ’—</title>

<style>
body{
 margin:0;
 font-family:'Comic Sans MS', cursive, sans-serif;
 background:linear-gradient(to bottom,#ffe4f1,#ffc1d6);
 text-align:center;
}

header{
 background:#e11d48;
 color:white;
 padding:20px;
 font-size:24px;
}

.container{
 max-width:900px;
 margin:30px auto;
 padding:20px;
}

.card{
 background:white;
 padding:25px;
 border-radius:20px;
 box-shadow:0 10px 25px rgba(0,0,0,0.15);
 margin-bottom:20px;
}

.equation{
 font-size:26px;
 font-weight:bold;
 margin:15px 0;
 color:#be123c;
}

input{
 padding:10px;
 font-size:18px;
 font-weight:bold;
 text-align:center;
 border:2px solid #e11d48;
 border-radius:8px;
 margin:5px;
 width:200px;
}

button{
 padding:12px 18px;
 font-size:16px;
 border:none;
 border-radius:12px;
 background:#e11d48;
 color:white;
 margin-top:10px;
 cursor:pointer;
}

button:hover{
 background:#be123c;
}

#poruka{
 font-weight:bold;
 margin-top:15px;
 color:#be123c;
 font-size:18px;
}

/* ğŸ’– Hearts */
.heart{
 position:fixed;
 font-size:28px;
 animation:floatUp 1.5s ease-out forwards;
 pointer-events:none;
}
@keyframes floatUp{
 0%{transform:translateY(0);opacity:1;}
 100%{transform:translateY(-150px);opacity:0;}
}

/* ğŸŒŸ Stars */
.star{
 position:fixed;
 font-size:22px;
 animation:twinkle 1.2s ease-out forwards;
 pointer-events:none;
}
@keyframes twinkle{
 0%{transform:scale(0.5);opacity:1;}
 100%{transform:scale(1.8);opacity:0;}
}

/* ğŸ‰ Confetti */
.confetti{
 position:fixed;
 width:10px;
 height:10px;
 animation:fall 2.5s linear forwards;
 pointer-events:none;
}
@keyframes fall{
 0%{transform:translateY(-20px) rotate(0deg);opacity:1;}
 100%{transform:translateY(100vh) rotate(720deg);opacity:0;}
}
</style>
</head>

<body>

<header>ğŸ‘‘ Princeza Matematika ğŸ’—</header>

<div class="container">

<div class="card">
 <input id="ime" placeholder="Ime princeze">
 <button onclick="startGame()">ZapoÄni igru</button>
</div>

<div class="card">
 <div id="info"></div>
 <div id="zadatak" class="equation"></div>
 <div id="odgovorPolje"></div>
 <div id="poruka"></div>
</div>

<div class="card" id="rezultatCard" style="display:none;"></div>

</div>

<script>

let ime="";
let question=0;
let limit=15;
let bodovi=0;
let used=new Set();
let correctAnswer=null;
let correctArray=null;
let statistika={
 sabiranje:0,
 oduzimanje:0,
 tekst:0,
 parni:0,
 niz:0
};

function rand(min,max){
 return Math.floor(Math.random()*(max-min+1))+min;
}

function startGame(){
 ime=document.getElementById("ime").value||"Princeza";
 question=0;
 bodovi=0;
 used.clear();
 for(let key in statistika) statistika[key]=0;
 document.getElementById("rezultatCard").style.display="none";
 nextQuestion();
}

function updateInfo(){
 document.getElementById("info").innerHTML=
 "Pitanje: "+(question+1)+" / "+limit+
 " | Bodovi: "+bodovi+" ğŸ’—";
}

function nextQuestion(){
 if(question>=limit){ finish(); return; }

 document.getElementById("poruka").innerHTML="";
 document.getElementById("odgovorPolje").innerHTML="";
 correctAnswer=null;
 correctArray=null;

 let tip,a,b,key;
 do{
  tip=rand(1,6);
  a=rand(1,20);
  b=rand(1,20);
  key=tip+"-"+a+"-"+b;
 }while(used.has(key));
 used.add(key);

 let tekst=(question+1)+". ";

 if(tip===1){
  a=rand(5,15); b=rand(1,20-a);
  correctAnswer=a+b;
  tekst+="IzraÄunaj: "+a+" + "+b+" = _";
  statistika.sabiranje++;
 }

 if(tip===2){
  a=rand(10,20); b=rand(1,a-1);
  correctAnswer=a-b;
  tekst+="IzraÄunaj: "+a+" âˆ’ "+b+" = _";
  statistika.oduzimanje++;
 }

 if(tip===3){
  a=rand(5,15); b=rand(1,20-a);
  correctAnswer=a+b;
  tekst+="Princeza ima "+a+" kruna i dobila je "+b+
  ". Koliko sada ima?";
  statistika.tekst++;
 }

 if(tip===4){
  correctArray=[2,4,6,8,10];
  tekst+="Koji su parni brojevi prve desetice? (upiÅ¡i redom, odvojene zarezom)";
  statistika.parni++;
 }

 if(tip===5){
  correctArray=[12,14,16,18];
  tekst+="NapiÅ¡i sve parne brojeve izmeÄ‘u 10 i 18.";
  statistika.parni++;
 }

 if(tip===6){
  let start=rand(2,10);
  correctAnswer=start+3;
  tekst+="Nastavi niz: "+start+", "+(start+3)+", "+(start+6)+", _";
  statistika.niz++;
 }

 document.getElementById("zadatak").innerHTML=tekst;
 document.getElementById("odgovorPolje").innerHTML="<input id='odg'>";
 document.getElementById("odgovorPolje")
 .addEventListener("change",checkAnswer);

 updateInfo();
}

function checkAnswer(){
 let input=document.getElementById("odg").value.trim().toLowerCase();
 let tacno=false;

 if(correctAnswer!==null){
  if(parseInt(input)===correctAnswer) tacno=true;
 }

 if(correctArray!==null){
  let niz=input.split(",").map(x=>parseInt(x.trim()));
  tacno=JSON.stringify(niz)===JSON.stringify(correctArray);
 }

 if(tacno){
  bodovi+=2;
  document.getElementById("poruka").innerHTML="Bravo princezo! ğŸ’–";
  heartAnimation();
  starEffect();
 }else{
  document.getElementById("poruka").innerHTML="NetaÄno âŒ";
 }

 question++;
 setTimeout(nextQuestion,1200);
}

function finish(){
 let max=limit*2;
 let proc=Math.round((bodovi/max)*100);

 document.getElementById("rezultatCard").style.display="block";
 document.getElementById("rezultatCard").innerHTML=
 "<h3>Rezultat ğŸ’—</h3>"+
 "Princeza: <b>"+ime+"</b><br>"+
 "Bodovi: "+bodovi+" / "+max+"<br>"+
 "UspeÅ¡nost: "+proc+"%";

 if(proc===100) confettiEffect();
}

/* ğŸ’– Hearts */
function heartAnimation(){
 for(let i=0;i<6;i++){
  let h=document.createElement("div");
  h.className="heart";
  h.innerHTML=["ğŸ’–","ğŸ’—","ğŸ’•","ğŸ’˜"][Math.floor(Math.random()*4)];
  h.style.left=Math.random()*90+"%";
  h.style.top="60%";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),1500);
 }
}

/* ğŸŒŸ Stars */
function starEffect(){
 for(let i=0;i<6;i++){
  let s=document.createElement("div");
  s.className="star";
  s.innerHTML="ğŸŒŸ";
  s.style.left=(45+Math.random()*10)+"%";
  s.style.top="50%";
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),1200);
 }
}

/* ğŸ‰ Confetti */
function confettiEffect(){
 for(let i=0;i<50;i++){
  let c=document.createElement("div");
  c.className="confetti";
  c.style.left=Math.random()*100+"%";
  c.style.background=["#ff4d6d","#ff85a2","#f72585","#d00000"]
   [Math.floor(Math.random()*4)];
  document.body.appendChild(c);
  setTimeout(()=>c.remove(),2500);
 }
}

</script>

</body>
</html>
