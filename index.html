<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Princess Math ‚Äì ≈†kolska PRO verzija</title>

<style>
body{
 margin:0;
 font-family:Arial, sans-serif;
 background:#f4f6f9;
 text-align:center;
}

header{
 background:#6d28d9;
 color:white;
 padding:20px;
 font-size:22px;
}

.container{
 max-width:800px;
 margin:30px auto;
 padding:20px;
}

.card{
 background:white;
 padding:25px;
 border-radius:12px;
 box-shadow:0 8px 20px rgba(0,0,0,0.1);
 margin-bottom:20px;
}

.equation{
 font-size:32px;
 font-weight:bold;
 margin:20px 0;
}

input{
 width:120px;
 padding:12px;
 font-size:22px;
 font-weight:bold;
 text-align:center;
 border:2px solid #6d28d9;
 border-radius:8px;
}

button{
 padding:12px 18px;
 font-size:16px;
 border:none;
 border-radius:8px;
 background:#6d28d9;
 color:white;
 margin-top:10px;
 cursor:pointer;
}

button:hover{
 background:#5b21b6;
}

#info{
 font-weight:bold;
 margin-bottom:15px;
}

#poruka{
 margin-top:15px;
 font-size:18px;
 font-weight:bold;
}

.report{
 text-align:left;
 line-height:1.6;
}
</style>
</head>

<body>

<header>üéì Princess Math ‚Äì ≈†kolska Standardizovana PRO üéì</header>

<div class="container">

<div class="card">
 <input id="ime" placeholder="Ime uƒçenice">
 <button onclick="startGame()">Zapoƒçni test</button>
</div>

<div class="card">
 <div id="info"></div>
 <div id="equation" class="equation"></div>
 <input id="odgovor" type="number">
 <div id="poruka"></div>
</div>

<div class="card" id="rezultatCard" style="display:none;"></div>

</div>

<script>

let ime="";
let question=0;
let limit=12;
let bodovi=0;
let correctAnswer=0;
let trenutnaKategorija="";

let sabTacno=0;
let oduzTacno=0;

let sabUkupno=0;
let oduzUkupno=0;

function rand(min,max){
 return Math.floor(Math.random()*(max-min+1))+min;
}

function startGame(){
 ime=document.getElementById("ime").value || "Uƒçenica";
 question=0;
 bodovi=0;

 sabTacno=0;
 oduzTacno=0;
 sabUkupno=0;
 oduzUkupno=0;

 document.getElementById("rezultatCard").style.display="none";
 nextQuestion();
}

function updateInfo(){
 document.getElementById("info").innerHTML=
 "Pitanje: "+(question+1)+" / "+limit+
 " | Bodovi: "+bodovi;
}

function nextQuestion(){

 if(question>=limit){
  finish();
  return;
 }

 document.getElementById("poruka").innerHTML="";
 document.getElementById("odgovor").value="";

 let operator=Math.random()<0.5?"+":"‚àí";
 let a=rand(8,20);
 let b=rand(1,15);

 if(operator==="+"){
  if(a+b>20) b=20-a;
  correctAnswer=a+b;
  trenutnaKategorija="sabiranje";
  sabUkupno++;
 }else{
  if(b>=a) b=a-1;
  correctAnswer=a-b;
  trenutnaKategorija="oduzimanje";
  oduzUkupno++;
 }

 document.getElementById("equation").innerHTML=
 "<div>"+(question+1)+". Izraƒçunaj:</div>"+
 "<div>"+a+" "+operator+" "+b+" = _</div>";

 document.getElementById("odgovor").onchange=checkAnswer;

 updateInfo();
}

function checkAnswer(){

 let value=parseInt(document.getElementById("odgovor").value);

 if(value===correctAnswer){
  bodovi+=2;

  if(trenutnaKategorija==="sabiranje") sabTacno++;
  if(trenutnaKategorija==="oduzimanje") oduzTacno++;

  document.getElementById("poruka").innerHTML="Taƒçno ‚úî";
 }else{
  document.getElementById("poruka").innerHTML=
  "Netaƒçno ‚ùå Taƒçno je "+correctAnswer;
 }

 question++;
 setTimeout(nextQuestion,1000);
}

function finish(){

 let maxBodova=limit*2;
 let procenat=Math.round((bodovi/maxBodova)*100);

 let ocena=1;
 if(procenat>=90) ocena=5;
 else if(procenat>=75) ocena=4;
 else if(procenat>=60) ocena=3;
 else if(procenat>=50) ocena=2;

 let sabProc = sabUkupno>0 ?
 Math.round((sabTacno/sabUkupno)*100) : 0;

 let oduzProc = oduzUkupno>0 ?
 Math.round((oduzTacno/oduzUkupno)*100) : 0;

 let preporuka="Nastaviti redovno ve≈æbanje.";
 if(sabProc<70) preporuka="Potrebno dodatno ve≈æbanje sabiranja.";
 if(oduzProc<70) preporuka="Potrebno dodatno ve≈æbanje oduzimanja.";

 document.getElementById("rezultatCard").style.display="block";
 document.getElementById("rezultatCard").innerHTML=
 "<div class='report'>"+
 "<h3>≈†KOLSKI IZVE≈†TAJ</h3>"+
 "Uƒçenica: <b>"+ime+"</b><br><br>"+
 "Bodovi: "+bodovi+" / "+maxBodova+"<br>"+
 "Uspe≈°nost: "+procenat+"%<br>"+
 "Ocena: <b>"+ocena+"</b><br><br>"+
 "Sabiranje: "+sabProc+"%<br>"+
 "Oduzimanje: "+oduzProc+"%<br><br>"+
 "Preporuka: "+preporuka+
 "</div>";
}

</script>

</body>
</html>
