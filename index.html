<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ü—Ä–∏–Ω—Ü–µ–∑–∏–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–∫–∞ –∞–≤–∞–Ω—Ç—É—Ä–∞</title>

<style>
:root{
 --primary:#d946ef;
 --secondary:#f472b6;
 --bg:#fdf2f8;
 --card:#ffffff;
}

body{
 margin:0;
 font-family:-apple-system,BlinkMacSystemFont,sans-serif;
 background:linear-gradient(#fbcfe8,#fdf2f8);
 text-align:center;
 overflow-x:hidden;
}

header{
 background:var(--primary);
 color:white;
 padding:18px;
 font-size:22px;
}

.avatar{
 font-size:60px;
 margin-top:10px;
}

.container{
 padding:20px;
 max-width:520px;
 margin:auto;
}

.card{
 background:var(--card);
 padding:20px;
 border-radius:25px;
 box-shadow:0 10px 25px rgba(0,0,0,0.1);
 margin-bottom:20px;
}

button{
 padding:14px;
 margin:6px;
 font-size:16px;
 border-radius:20px;
 border:none;
 background:var(--primary);
 color:white;
 min-width:140px;
}

button.secondary{
 background:var(--secondary);
}

input{
 padding:12px;
 font-size:18px;
 width:160px;
 border-radius:15px;
 border:2px solid #f9a8d4;
 text-align:center;
}

#zadatak{
 font-size:20px;
 margin:15px 0;
}

#poruka{
 font-size:18px;
 font-weight:bold;
 margin-top:10px;
 min-height:28px;
}

.status{
 font-size:14px;
 margin-top:10px;
 color:#6b21a8;
}

.hidden{display:none;}

.sparkle{
 position:absolute;
 font-size:22px;
 animation:float 1s ease-out forwards;
}

@keyframes float{
 from{transform:translateY(0);opacity:1;}
 to{transform:translateY(-60px);opacity:0;}
}
</style>
</head>

<body>

<header>üëë –ü—Ä–∏–Ω—Ü–µ–∑–∏–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–∫–∞ –∞–≤–∞–Ω—Ç—É—Ä–∞ ‚ú®</header>

<div class="avatar">üë∏üè∞‚ú®</div>

<div class="container">

<div class="card">
 <button onclick="pokreniIgru('sab')">–°–∞–±–∏—Ä–∞—ö–µ</button>
 <button onclick="pokreniIgru('oduz')">–û–¥—É–∑–∏–º–∞—ö–µ</button>
 <button onclick="pokreniIgru('par')">–ü–∞—Ä–Ω–∏ / –ù–µ–ø–∞—Ä–Ω–∏</button>
 <button onclick="pokreniIgru('sled')">–ü—Ä–µ—Ç—Ö–æ–¥–Ω–∏–∫ / –°–ª–µ–¥–±–µ–Ω–∏–∫</button>
 <button onclick="pokreniTest()" class="secondary">üëë –í–µ–ª–∏–∫–∏ –∫—Ä–∞—ô–µ–≤—Å–∫–∏ —Ç–µ—Å—Ç (20)</button>
</div>

<div class="card">
 <div id="zadatak">–ò–∑–∞–±–µ—Ä–∏ –∏–≥—Ä—É –¥–∞ –ø–æ—á–Ω–µ—à</div>
 <input id="odgovor" onkeyup="autoProvera(event)">
 <div id="poruka"></div>
 <div class="status" id="status"></div>
</div>

<div class="card hidden" id="rezultatKartica">
 <h3>üëë –†–µ–∑—É–ª—Ç–∞—Ç üëë</h3>
 <div id="rezultatTekst"></div>
 <button onclick="resetSve()">–ò–≥—Ä–∞–º–æ –ø–æ–Ω–æ–≤–æ</button>
</div>

</div>

<script>
let oblast="";
let tacno;
let tacni=0;
let pogresni=0;
let ukupno=0;
let limit=5;

const porukeTacno=[
 "–ë—Ä–∞–≤–æ –ø—Ä–∏–Ω—Ü–µ–∑–æ! üëë",
 "–û–¥–ª–∏—á–Ω–æ! ‚ú®",
 "–°—ò–∞—ò–Ω–æ! üå∏",
 "–¢–∏ —Å–∏ –ø—Ä–∞–≤–∞ –∫—Ä–∞—ô–∏—Ü–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ! üíñ"
];

const porukeNetacno=[
 "–ü–æ–∫—É—à–∞—ò –ø–æ–Ω–æ–≤–æ üå∑",
 "–ú–∞–ª–æ —ò–æ—à –≤–µ–∂–±–µ üíï",
 "–ë–∏—õ–µ –±–æ—ô–µ —Å–ª–µ–¥–µ—õ–∏ –ø—É—Ç üåà"
];

function rand(max){return Math.floor(Math.random()*max)+1;}

function pokreniIgru(o){
 oblast=o;
 limit=5;
 resetStat();
 novi();
}

function pokreniTest(){
 oblast="test";
 limit=20;
 resetStat();
 novi();
}

function resetStat(){
 tacni=0;
 pogresni=0;
 ukupno=0;
 document.getElementById("rezultatKartica").classList.add("hidden");
}

function generisiOblast(){
 let oblasti=["sab","oduz","par","sled"];
 return oblasti[Math.floor(Math.random()*4)];
}

function novi(){
 if(ukupno>=limit){
  zavrsi();
  return;
 }

 document.getElementById("odgovor").value="";
 document.getElementById("poruka").innerHTML="";

 let aktivna=(oblast==="test")?generisiOblast():oblast;
 let max=20;
 let tekst=(ukupno+1)+". ";

 if(aktivna==="sab"){
  let a=rand(max);
  let b=rand(max-a);
  tacno=a+b;
  tekst+="–ò–∑—Ä–∞—á—É–Ω–∞—ò: "+a+" + "+b;
 }

 if(aktivna==="oduz"){
  let a=rand(max);
  let b=rand(a);
  tacno=a-b;
  tekst+="–ò–∑—Ä–∞—á—É–Ω–∞—ò: "+a+" - "+b;
 }

 if(aktivna==="par"){
  let br=rand(max);
  tacno=(br%2==0)?"–ø–∞—Ä–∞–Ω":"–Ω–µ–ø–∞—Ä–∞–Ω";
  tekst+="–î–∞ –ª–∏ —ò–µ "+br+" –ø–∞—Ä–∞–Ω –∏–ª–∏ –Ω–µ–ø–∞—Ä–∞–Ω?";
 }

 if(aktivna==="sled"){
  let br=rand(max-1);
  if(Math.random()<0.5){
   tacno=br-1;
   tekst+="–ü—Ä–µ—Ç—Ö–æ–¥–Ω–∏–∫ –±—Ä–æ—ò–∞ "+br+" —ò–µ?";
  }else{
   tacno=br+1;
   tekst+="–°–ª–µ–¥–±–µ–Ω–∏–∫ –±—Ä–æ—ò–∞ "+br+" —ò–µ?";
  }
 }

 document.getElementById("zadatak").innerHTML=tekst;
}

function autoProvera(event){
 if(event.key==="Enter"){
  proveri();
 }
}

function proveri(){
 let unos=document.getElementById("odgovor").value.trim().toLowerCase();
 let tacan=(unos==tacno);

 if(tacan){tacni++;} else{pogresni++;}
 ukupno++;

 prikaziPoruku(tacan);

 setTimeout(novi,1500);
}

function prikaziPoruku(tacan){
 let div=document.getElementById("poruka");
 if(tacan){
  div.style.color="#16a34a";
  div.innerHTML=porukeTacno[Math.floor(Math.random()*porukeTacno.length)];
  animacija();
 }else{
  div.style.color="#dc2626";
  div.innerHTML=porukeNetacno[Math.floor(Math.random()*porukeNetacno.length)];
 }
}

function animacija(){
 for(let i=0;i<6;i++){
  let s=document.createElement("div");
  s.className="sparkle";
  s.innerHTML="‚ú®";
  s.style.left=Math.random()*90+"%";
  s.style.top="50%";
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),1000);
 }
}

function zavrsi(){
 document.getElementById("rezultatKartica").classList.remove("hidden");
 let procenat=Math.round((tacni/limit)*100);

 document.getElementById("rezultatTekst").innerHTML=
 "–¢–∞—á–Ω–∏ –æ–¥–≥–æ–≤–æ—Ä–∏: "+tacni+
 "<br>–ü–æ–≥—Ä–µ—à–Ω–∏ –æ–¥–≥–æ–≤–æ—Ä–∏: "+pogresni+
 "<br>–£—Å–ø–µ—à–Ω–æ—Å—Ç: "+procenat+"%";
}

function resetSve(){
 location.reload();
}
</script>

</body>
</html>
