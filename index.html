<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üëë –ü—Ä–∏–Ω—Ü–µ–∑–∏–Ω –≤–µ–ª–∏–∫–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–∫–∏ –∏–∑–∞–∑–æ–≤</title>

<style>
:root{
 --primary:#d946ef;
 --bg:#fdf2f8;
 --card:#ffffff;
}

body{
 margin:0;
 font-family:-apple-system,BlinkMacSystemFont,sans-serif;
 background:linear-gradient(#fbcfe8,#fdf2f8);
 text-align:center;
}

header{
 background:var(--primary);
 color:white;
 padding:18px;
 font-size:22px;
}

.avatar{
 font-size:60px;
 margin-top:10px;
}

.krune{
 font-size:20px;
 margin-top:10px;
}

.container{
 padding:20px;
 max-width:650px;
 margin:auto;
}

.card{
 background:var(--card);
 padding:20px;
 border-radius:25px;
 box-shadow:0 10px 25px rgba(0,0,0,0.1);
 margin-bottom:20px;
}

button{
 padding:14px;
 font-size:16px;
 border-radius:20px;
 border:none;
 background:var(--primary);
 color:white;
 margin-top:10px;
}

input{
 padding:12px;
 font-size:18px;
 width:80%;
 border-radius:15px;
 border:2px solid #f9a8d4;
 text-align:center;
}

#poruka{
 font-weight:bold;
 margin-top:10px;
 min-height:40px;
}

.diploma{
 border:4px dashed #d946ef;
 padding:30px;
 border-radius:25px;
 background:white;
 margin-top:20px;
}

.sparkle{
 position:absolute;
 font-size:22px;
 animation:float 1s ease-out forwards;
}

@keyframes float{
 from{transform:translateY(0);opacity:1;}
 to{transform:translateY(-60px);opacity:0;}
}
</style>
</head>

<body>

<header>üëë –ü—Ä–∏–Ω—Ü–µ–∑–∏–Ω –≤–µ–ª–∏–∫–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–∫–∏ –∏–∑–∞–∑–æ–≤ ‚ú®</header>
<div class="avatar">üë∏üè∞‚ú®</div>

<div class="container">

<div class="card">
 <input id="ime" placeholder="–£–Ω–µ—Å–∏ –∏–º–µ –ø—Ä–∏–Ω—Ü–µ–∑–µ">
 <button onclick="startGame()">–ó–∞–ø–æ—á–Ω–∏ –∫—Ä–∞—ô–µ–≤—Å–∫–∏ –∏–∑–∞–∑–æ–≤</button>
</div>

<div class="krune" id="krune">–ö—Ä—É–Ω–µ: 0 üëë</div>

<div class="card">
 <div id="zadatak">–ö–ª–∏–∫–Ω–∏ –¥–∞ –ø–æ—á–Ω–µ—à</div>
 <input id="odgovor" onkeyup="autoCheck(event)">
 <div id="poruka"></div>
</div>

<div class="card" id="resultCard" style="display:none;">
 <h3>üëë –ö—Ä–∞—ò –∏–∑–∞–∑–æ–≤–∞ üëë</h3>
 <div id="resultText"></div>
</div>

<div class="card" id="diplomaCard" style="display:none;">
 <div class="diploma" id="diplomaContent">
   <h2>üéì –î–ò–ü–õ–û–ú–ê üéì</h2>
   <p>–û–≤–æ–º –¥–∏–ø–ª–æ–º–æ–º —Å–µ –ø–æ—Ç–≤—Ä—í—É—ò–µ –¥–∞ —ò–µ</p>
   <h1 id="imeDiploma"></h1>
   <p>—É—Å–ø–µ—à–Ω–æ –∑–∞–≤—Ä—à–∏–ª–∞</p>
   <h3>–ü—Ä–∏–Ω—Ü–µ–∑–∏–Ω –≤–µ–ª–∏–∫–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–∫–∏ –∏–∑–∞–∑–æ–≤</h3>
   <h2 id="titulaDiploma"></h2>
   <p id="kruneDiploma"></p>
   <p>üëë –ß–µ—Å—Ç–∏—Ç–∞–º–æ! üëë</p>
 </div>
 <button onclick="window.print()">–û–¥—à—Ç–∞–º–ø–∞—ò –¥–∏–ø–ª–æ–º—É</button>
</div>

</div>

<script>
let correctAnswer;
let explanation="";
let correct=0;
let wrong=0;
let count=0;
let limit=15;
let krune=0;
let imeDeteta="";

function rand(max){return Math.floor(Math.random()*max)+1;}

function startGame(){
 imeDeteta=document.getElementById("ime").value || "–ú–∞–ª–∞ –ø—Ä–∏–Ω—Ü–µ–∑–∞";
 correct=0;
 wrong=0;
 count=0;
 krune=0;
 updateKrune();
 document.getElementById("resultCard").style.display="none";
 document.getElementById("diplomaCard").style.display="none";
 nextQuestion();
}

function updateKrune(){
 document.getElementById("krune").innerHTML="–ö—Ä—É–Ω–µ: "+krune+" üëë";
}

function nextQuestion(){
 if(count>=limit){
  finish();
  return;
 }

 document.getElementById("odgovor").value="";
 document.getElementById("poruka").innerHTML="";

 let type=Math.floor(Math.random()*5);
 let text=(count+1)+". ";

 if(type===0){
  let a=rand(10)+5;
  let b=rand(20-a);
  correctAnswer=a+"+"+b+"="+(a+b);
  explanation=a+" + "+b+" = "+(a+b);
  text+="–ü—Ä–∏–Ω—Ü–µ–∑–∞ –∏–º–∞ "+a+" –∫—Ä—É–Ω–∞. –î–æ–±–∏–ª–∞ —ò–µ —ò–æ—à "+b+
  ". –ù–∞–ø–∏—à–∏ —Ü–µ–ª–æ —Ä–µ—à–µ—ö–µ.";
 }

 if(type===1){
  let a=rand(10)+8;
  let b=rand(a-1)+1;
  correctAnswer=a+"-"+b+"="+(a-b);
  explanation=a+" - "+b+" = "+(a-b);
  text+="–ü—Ä–∏–Ω—Ü–µ–∑–∞ —ò–µ –∏–º–∞–ª–∞ "+a+" —Ü–≤–µ—Ç–æ–≤–∞. –ü–æ–∫–ª–æ–Ω–∏–ª–∞ —ò–µ "+b+
  ". –ù–∞–ø–∏—à–∏ —Ü–µ–ª–æ —Ä–µ—à–µ—ö–µ.";
 }

 if(type===2){
  let niz=[2,4,6,8,10];
  correctAnswer="246810";
  explanation="–ü–∞—Ä–Ω–∏ –±—Ä–æ—ò–µ–≤–∏ —Å—É: 2 4 6 8 10";
  text+="–ù–∞–ø–∏—à–∏ —Å–≤–µ –ø–∞—Ä–Ω–µ –±—Ä–æ—ò–µ–≤–µ –ø—Ä–≤–µ –¥–µ—Å–µ—Ç–∏—Ü–µ –±–µ–∑ —Ä–∞–∑–º–∞–∫–∞.";
 }

 if(type===3){
  let n=rand(18)+1;
  correctAnswer=(n+1).toString();
  explanation="–ë—Ä–æ—ò –ø–æ—Å–ª–µ "+n+" —ò–µ "+(n+1);
  text+="–ö–æ—ò–∏ –±—Ä–æ—ò –¥–æ–ª–∞–∑–∏ –ø–æ—Å–ª–µ "+n+"?";
 }

 if(type===4){
  let start=rand(8)+2;
  correctAnswer=(start+6).toString();
  explanation="–ù–∏–∑ —Ä–∞—Å—Ç–µ –∑–∞ 2. –°–ª–µ–¥–µ—õ–∏ –±—Ä–æ—ò —ò–µ "+(start+6);
  text+="–ù–∞—Å—Ç–∞–≤–∏ –Ω–∏–∑: "+start+", "+(start+2)+", "+(start+4)+", ?";
 }

 document.getElementById("zadatak").innerHTML=text;
}

function autoCheck(e){
 if(e.key==="Enter"){
  checkAnswer();
 }
}

function normalize(str){
 return str.replace(/\s+/g,"").toLowerCase();
}

function checkAnswer(){
 let user=normalize(document.getElementById("odgovor").value);
 let tacno=false;

 if(user===normalize(correctAnswer)){
  tacno=true;
 }

 if(tacno){
  correct++;
  krune++;
  updateKrune();
  showMessage(true);
 }else{
  wrong++;
  showMessage(false);
 }

 count++;
 setTimeout(nextQuestion,2000);
}

function showMessage(ok){
 let msg=document.getElementById("poruka");

 if(ok){
  msg.style.color="green";
  msg.innerHTML="–ë—Ä–∞–≤–æ! –û—Å–≤–æ—ò–∏–ª–∞ —Å–∏ –∫—Ä—É–Ω—É! üëë";
  sparkle();
 }else{
  msg.style.color="red";
  msg.innerHTML="–ù–µ—Ç–∞—á–Ω–æ ‚ùå<br>–¢–∞—á–Ω–æ —Ä–µ—à–µ—ö–µ: "+correctAnswer+
  "<br>"+explanation;
 }
}

function sparkle(){
 for(let i=0;i<6;i++){
  let s=document.createElement("div");
  s.className="sparkle";
  s.innerHTML="üëë";
  s.style.left=Math.random()*90+"%";
  s.style.top="50%";
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),1000);
 }
}

function finish(){
 document.getElementById("resultCard").style.display="block";

 let titula="–ú–∞–ª–∞ –ø—Ä–∏–Ω—Ü–µ–∑–∞ üëë";
 if(krune>=13) titula="–í–µ–ª–∏–∫–∞ –ø—Ä–∏–Ω—Ü–µ–∑–∞ üëë‚ú®";
 if(krune===15) titula="–ö–†–ê–â–ò–¶–ê –ú–ê–¢–ï–ú–ê–¢–ò–ö–ï üëëüèÜ";

 document.getElementById("resultText").innerHTML=
 "–û—Å–≤–æ—ò–µ–Ω–µ –∫—Ä—É–Ω–µ: "+krune+
 "<br>–¢–∞—á–Ω–∏: "+correct+
 "<br>–ü–æ–≥—Ä–µ—à–Ω–∏: "+wrong+
 "<br><br>"+titula;

 // DIPLOMA
 document.getElementById("diplomaCard").style.display="block";
 document.getElementById("imeDiploma").innerText=imeDeteta;
 document.getElementById("titulaDiploma").innerText=titula;
 document.getElementById("kruneDiploma").innerText=
 "–û—Å–≤–æ—ò–µ–Ω–µ –∫—Ä—É–Ω–µ: "+krune;
}
</script>

</body>
</html>
